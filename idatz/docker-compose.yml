services:
  idatz-dev:
    image: node:lts
    container_name: idatz-dev
    working_dir: /workspace/idatz
    volumes:
      # Mount the whole parent workspace to allow Vite to resolve '../packages/idaztian'
      - ../:/workspace
    ports:
      - "5174:5174"
    command: npm run dev

  tauri-dev:
    build:
      context: .
      dockerfile: Dockerfile.tauri
    container_name: tauri-dev
    working_dir: /workspace/idatz
    volumes:
      - ../:/workspace
      - /tmp/.X11-unix:/tmp/.X11-unix
    environment:
      - DISPLAY=${DISPLAY}
    network_mode: host
    # Keep container alive if started without command override
    command: tail -f /dev/null
